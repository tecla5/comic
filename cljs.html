<!DOCTYPE html>
<html><head><link href="css/garden.css" rel="stylesheet" type="text/css"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-69202028-2', 'auto');
//ga('require', 'displayfeatures');
ga('send', 'pageview');
</script></head><body><div style="max-width: 900px; margin: 0 auto;"><a href="/">Home</a><h1><a href="#cljs-task" name="cljs-task"></a>Cljs task</h1>
<p>based on <a href="https://github.com/martinklepsch/tenzing">tenzing</a> was added clojurescript to the blog.</p>
<h2><a href="#clojurescript" name="clojurescript"></a>clojurescript</h2>
<p><a href="https://github.com/clojure/clojurescript">ClojureScript</a>  is a compiler for Clojure that targets JavaScript. It is designed to emit JavaScript code which is compatible with the advanced compilation mode of the Google Closure optimizing compiler.</p>
<p>## Adding the ClojureScript app</p>
<p>creating the file <code>cljs/comic/app.cljs</code> that contain the our app with clojurescript.  <code>clojure
 (defn init []
   (let [c (.. js/document (createElement &quot;DIV&quot;))]
     (aset c &quot;innerHTML&quot; &quot;&lt;p&gt;i&#39;m dynamically created, yes :)&lt;/p&gt;&quot;)
     (.. js/document (getElementById &quot;container&quot;) (appendChild c))))
</code></p>
<p>adding id container and script reference to <code>site/core.clj</code> file  <code>clojure
       [:div {:style &quot;background-color: blue&quot;}
           [:h2 &quot;comic-app&quot;]
           [:div {:id &quot;container&quot;}]
           (include-js &quot;js/app.js&quot;)]]))
</code></p>
<h2><a href="#configuration-for-compile-and-clojurescript-browser-repl-on-boot" name="configuration-for-compile-and-clojurescript-browser-repl-on-boot"></a>Configuration for compile and ClojureScript browser REPL on boot</h2>
<h3><a href="#boot-cljs-task" name="boot-cljs-task"></a>boot-cljs task</h3>
<p><a href="https://github.com/adzerk-oss/boot-cljs">boot-cljs</a> Boot task to compile ClojureScript applications.</p>
<p>adding config file <code>app.cljs.edn</code></p>
<pre><code class="clojure">{:require  [comic.app]
 :init-fns [comic.app/init]
 :compiler-options {:asset-path &quot;js/app.out&quot;}}
</code></pre>
<h3><a href="#boot-reload-task" name="boot-reload-task"></a>boot-reload task</h3>
<p><a href="https://github.com/adzerk-oss/boot-reload">boot-reload</a> is a boot task to automatically reload resources in the browser when files in the project change. Communication with the client is via websockets.</p>
<h3><a href="#boot-cljs-repl-task" name="boot-cljs-repl-task"></a>boot-cljs-repl task</h3>
<p><a href="https://github.com/adzerk-oss/boot-cljs-repl">boot-cljs-repl</a> is a boot task providing a ClojureScript browser REPL via <a href="https://github.com/tomjakubowski/weasel">Weasel</a> and <a href="https://github.com/cemerick/piggieback">Piggieback</a>. and dependant also <a href="https://github.com/clojure/tools.nrepl">tool.nrepl</a></p>
<ul>
  <li>
  <p>Weasel uses WebSockets to communicate between a ClojureScript REPL, which is typically hosted on nREPL using piggieback, and an environment which can execute compiled ClojureScript, which can be a web browser or any JavaScript environment that supports the WebSocket APIs.</p></li>
  <li>
  <p>Piggieback is nREPL middleware that enables the use of a ClojureScript REPL on top of an nREPL session.</p></li>
</ul></div><div style="background-color: blue"><h2>comic-app</h2><div id="container"></div><script src="js/app.js" type="text/javascript"></script></div></body></html>